<script type="text/javascript" charset="utf-8">

// welcome page functions

function profileOrHomeTemplate() {
  currentUser = `<%= current_user.id if current_user %>`
  if (currentUser === ``) {
    homeTemplate();
  } else {
    currentUserProfileTemplate();
  }
}

// user profile functions

function userIndexTemplate() {
  $(".main").empty();
  $(".main").append('<%= j render '/users/index' if current_user && current_user.admin %>');
}

function currentUserProfileTemplate() {
  hideSideNav();
  $.get(`/users/${currentUser}.json`, function(data) {
    if (data.admin) {
      $(".main").empty();
      $(".main").append('<%= j render '/users/admin_show' %>');
    } else {
      $(".main").empty();
      $(".main").append('<%= j render '/users/non_admin_show' %>');
      $(window).scrollTop(0);
      enlargeLoggedInIcon();
      shrinkLoggedInIcon();
      hideTopNav();
    }
  });
}

// edit profile functions

function editProfileTemplate() {
  hideCurrentUserProfileTemplate()
  $(".main").append('<%= j render '/users/edit' %>');
  hideSideNav();
  $("#editUserDetails").animate({"left": "31.5%"}, 10, function() {});
}

// proposal functions

function editProposalTemplate() {
  hideCurrentUserProfileTemplate()
  $(".main").append(`<%= j render '/proposals/edit' %>`);
  editProposal()
  hideSideNav();
  $("#editProposalDetails").animate({"right": "-33%"}, 10, function() {});
}

</script>
