<% if @proposal.image_url && !@proposal.image_url.empty? %>
  <img src="<%=@proposal.image_url%>" style="width: 35%; height: auto; float: left; margin: 20px 20px 20px 0;">
<% end %>
<h1><%= @proposal.name %></h1>
<h3><%= @proposal.description %></h3>
<hr>
<p>Submitted by: <%= linked_or_not(@proposal.user) %></p>
<h1>Why This Proposal Should Be Accepted</h1>
<p><%= @proposal.pitch %></p>

<% if current_user %>
  <%= render partial: 'logged_in_show' %>
<% end %>
<button class="js-next">Next Proposal</button>

  <hr>
  <div>
  <h1>Recent Comments:</h1>
  <p><%= link_to "View All Comments For This Post", proposal_comments_path(@proposal) %></p>
  <% if !@proposal.comments.empty? %>
    <% @proposal.comments.newest_first.limit(3).each do |comment| %>
    <h4><%= linked_or_not(comment.user) %> - <%= comment.created_at %></h4>
    <h4><%= comment.content %></h4>
    <p><%= link_to "Reply", new_proposal_comment_reply_path(@proposal.id, comment.id) if logged_in? %></p>
    <% if current_user && (current_user == comment.user || current_user.admin) %>
      <p><%= link_to "Edit", edit_comment_path(comment) %>
      <%= link_to "Delete", comment_path(comment), data: {:confirm => 'Are you sure?'}, method: "delete" %></p>
    <% end %>
    <% if comment.replies %>
      <br>
      <% comment.replies.each do |reply| %>
        <div>
          <hr>
          <h4><%= linked_or_not(reply.user) %> - <%= reply.created_at %></h4>
          <h4><%= reply.content %></h4>
          <% if current_user && (current_user == reply.user || current_user.admin) %>
            <p><%= link_to "Edit", edit_reply_path(reply) %>
            <%= link_to "Delete", reply_path(reply), data: {:confirm => 'Are you sure?'}, method: "delete" %></p>
          <% end %>
        </div>
      <% end %>
    <% end %>
    <hr>
    <% end %>
  <% else %>
    <p>There are no comments to display.</p>
    <hr>
  <% end %>
</div>

<script>

    $("button").on("click", function() {
      console.log("hi");
    });

</script>
