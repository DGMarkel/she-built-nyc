<% if current_user.proposal_id == @proposal.id || current_user.admin %>

  <%= link_to "Edit this proposal", edit_proposal_path(@proposal) %>
<% end %>

<% if current_user.admin %>
  <%= link_to "Destroy", proposal_path(@proposal), data: {:confirm => 'Are you sure?'}, method: "delete" %>
<% end %>

<% if !current_user.admin && current_user.id != @proposal.user_id  %>

  <h3>Rank this proposal</h3>
  <% if flash[:warning] %>
    <p style="color:red;"><%= flash[:warning] %>
  <% end %>
  <%= form_for(:ranking, url: rankings_path) do |f| %>
    <%= f.number_field :ranking %>
    <%= f.hidden_field :proposal, :value => @proposal.id %>
    <%= f.submit "Submit" %>
  <% end %>

<h3>Submit a Comment</h3>
<% if flash[:warning] %>
  <p style="color:red;"><%= flash[:warning] %>
<% end %>
<%= form_for(:comment, url: comments_path) do |f| %>
    <%= f.text_field :content %>
    <%= f.hidden_field :proposal, :value => @proposal.id %>
    <%= f.submit "Submit" %>
  <% end %>
<% end %>

<h3>Comments</h3>
  <hr>
  <% @proposal.comments.each do |comment| %>
  <%= comment.content %> - <%= link_to comment.user.name, user_path(comment.user) %> - <%= comment.created_at %>
  <hr>
<% end %>
